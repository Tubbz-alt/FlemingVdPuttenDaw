x <- c("a")
x[1]
x <- c("a","b")
x
x <- matrix(1:6,2,3)
x[1, ]
x =1
x <- list(foo = 1:4, bar = 0.6)
x
x$f
## add current repository of rstan
Sys.setenv(R_MAKEVARS_USER='')
options(repos = c(getOption("repos"), rstan = "http://wiki.stan.googlecode.com/git/R"))
install.packages('rstan', type = 'source')
source('~/Dropbox/Research/Metacognition/PROSPEC/Code/neuropsych.R')
source('~/Dropbox/Research/Metacognition/PROSPEC/Code/neuropsych.R')
pwish
rwish
source('~/Dropbox/Research/Metacognition/BN_model/old code/STAN/simple_test.R')
print(fit)
plot(fit)
library(parallel)
source('~/Documents/stateactionexpt/analysis/stan_test.R')
source('~/Documents/stateactionexpt/analysis/stan_test.R')
source('~/Documents/stateactionexpt/analysis/stan_test.R')
source('~/Documents/stateactionexpt/analysis/stan_test.R')
samples <- list(x = c(1.2, 1.4, 1, 0.8, 0.9, 0.6, 1.15), n=length(x))
samples
x = c(1.2, 1.4, 1, 0.8, 0.9, 0.6, 1.15)
n=length(x)
samples <- list(x = x, n=n)
samples
source('~/Documents/stateactionexpt/analysis/stan_test.R')
plot(fit)
install.packages('devtools')
library(devtools)
source_url("https://github.com/stan-dev/shinystan/raw/develop/install_shinystan.R")
install_shinystan()
source('~/Documents/stateactionexpt/analysis/stan_test.R')
launch_shinystan(fit)
library(shinyStan)
launch_shinystan(fit)
launch_shinystan(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
fit
print(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
transformed_d = d > 0
transformed_d
k = sum(transformed_d == )
ntrials=length(a)
sum(transformed_d == a)
N=length(a)
N
a = c(0, 1, 0, 0, 1)
d = c(-1, 1, -1, 1, 1)
transformed_d = d > 0
k = sum(transformed_d == a)
N=length(a)
data <- list(k, N)
data
a = c(0, 1, 0, 0, 1)
d = c(-1, 1, -1, 1, 1)
transformed_d = d > 0
k = sum(transformed_d == a)
N=length(a)
data <- list(k=k, N=N)
data
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
plot(fit)
launch_shinyStan(fit)
launch_shinystan(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
plot(fit)
print(fit)
dprime = 3
2/3
dprime = 1
2/1
1/3
1/1
1/4
2/4
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
print(fit)
plot(fit)
launch_shinystan(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/.active-rstudio-document')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
plot(fit)
print(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
fit
print(fit)
d
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
xp
print(fit)
print(fit)
plot(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
plot(fit)
-1/2
sigma <- 0.5
1/sigma^2
log(1/sigma^2)
-log(sigma)
sigma <- 0.7
log(1/sigma^2)
-log(sigma)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
plot(fit)
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
source('~/.active-rstudio-document')
source('~/Documents/stateactionexpt/analysis/stan_fit_metaConf.R')
quit()
q()
LL = rand
rnorm
LL = rnorm(c(2,10),0,1)
LL
LL = rnorm(10,0,1)
LL
help(rnorm)
help(runif)
matrix(rnorm(100), ncol=20)
matrix(rnorm(1000), ncol=20)
LL = matrix(rnorm(1000), ncol=20)
dim(LL)
prod(dim(LL)[2:length(dim(LL))])
(length(dim(LL))==1)
c(length(LL),1)
S <- nrow(LL)
n <- ncol(LL)
S
n
LL = matrix(rnorm(1000), nrow=20)
LL
S <- nrow(LL)
n <- ncol(LL)
S
n
index <- matrix(TRUE, ncol=n, nrow=S)
index
LL[index]
a = LL[index]
lpd <- log(colMeans(exp(LL))) #log pointwise predictive density
lpd
pWaic <- colVars(LL) #simulation-estimated effective num params
pWaic
lpd
source("~/Dropbox/Utils/stan/colVars.R")
pWaic <- colVars(LL)
pWaic
LL
lpd
ST = rep(50,1,20)
ST
ST[2] = 48
ST[4] = 49
ST
ST < 10
ST >= 10
ST >= 47
ST >= 48
ST >= 49
ST >= 50
ind
LL
ind
i = 10
ind <- ST >= i
LL[ind,]
LL[ind,i]
length(LL[ind,i])
i <- 50
ind <- ST >= i
ind
LL[ind,i]
length(LL[ind,i])
var
LL
1/exp(LL-max(LL))
ind
LL[!ind,i]
LL[!ind,i] <- NA
LL
lpd <- log(colMeans(exp(LL)))
lpd
help(colMeans)
help(colVar)
help(colVars)
colVars
colVars(LL)
source("~/Dropbox/Utils/stan/colVars.R")
colVars(LL)
colVars(LL, na.rm = TRUE)
exp(LL)
help(pmin)
LL
ST
# Replace missing values with NA
if (hasArg(ST)) {
lpd <- NULL
pWaic <- NULL
for (i in 1:n) {
ind <- ST >= i
LL[!ind,i] <- NA
}
}
LL
ST
# Replace missing values with NA
if (hasArg(ST)) {
lpd <- NULL
pWaic <- NULL
for (i in 1:n) {
ind <- ST >= i
LL[!ind,i] <- NA
}
}
LL
i = 49
ST >= i
n
LL[!ind,i]
i
LL[!ind,i] <- NA
LL
LL <- matrix(rnorm(1000), 20, 50)
LL
ST = rep(50, 1, 20)
ST
ST[3] <- 45
ST[5] <- 49
LL
# Replace missing values with NA
if (hasArg(ST)) {
lpd <- NULL
pWaic <- NULL
for (i in 1:n) {
ind <- ST >= i
LL[!ind,i] <- NA
}
}
LL
is.na(LL)
sum(is.na(LL))
ind
i = 1
ind <- ST >= i
ind
LL[!ind,i] <- NA
LL
!ind
i
LL
# Replace missing values with NA
if (hasArg(ST)) {
lpd <- NULL
pWaic <- NULL
for (i in 1:n) {
ind <- ST >= i
LL[!ind,i] <- NA
}
}
LL
LL[!ind,i]
!ind
ind
for (i in 1:n) {
ind <- ST >= i
LL[!ind,i] <- NA
}
LL
lpd <- log(colMeans(exp(LL)), na.rm=TRUE) #log pointwise predictive density
lpd
lpd <- log(colMeans(exp(LL), na.rm=TRUE)) #log pointwise predictive density
lpd
colVars(LL, na.rm=TRUE) #simulation-estimated effective num params
pWaic
pWaic <- colVars(LL, na.rm=TRUE) #simulation-estimated effective num params
elpdWaic <- lpd - pWaic
elpdWaic
waic <- -2*elpdWaic #put into deviance scale
waic
looWeightsRaw <- 1/exp(LL-max(LL))
looWeightsRaw
max(LL)
help(max)
1/exp(LL-max(LL, na.rm=TRUE))
looWeightsRaw <- 1/exp(LL-max(LL, na.rm=TRUE))
looWeightsRaw
looWeightsNormalized <-
looWeightsRaw/matrix(colMeans(looWeightsRaw, na.rm=TRUE),nrow=S,ncol=n, byrow=TRUE)
looWeightsNormalized
looWeightsRegularized <- pmin (looWeightsNormalized, sqrt(S), na.rm=TRUE)
looWeightsRegularized
elpdLoo <-
log(colMeans(exp(LL)*looWeightsRegularized, na.rm=TRUE)/colMeans(looWeightsRegularized, na.rm=TRUE))
elpdLoo
pLoo <- lpd - elpdLoo
pLoo
pointwise <- cbind(waic,lpd,pWaic,elpdWaic,pLoo,elpdLoo)
pointwise
total <- colSums(pointwise)
total
se <- sqrt(n*colVars(pointwise))
se
quit()
quit()
quit()
load("~/Documents/fitObject_marginalizeTheta.RData")
require(shinyStan)
launch_shinystan(meta_fit)
28236/60
470/60
load("~/Documents/stateActionExpt/analysis/stan/simple model/modelfits_marginalizeTheta/fitObject_marginalizeTheta.RData")
require(shinyStan)
launch_shinyStan(meta_fit)
launch_shinystan(meta_fit)
load("~/Documents/stateActionExpt/analysis/stan/simple model/modelfits_marginalizeTheta/fitObject_marginalizeTheta.RData")
require(shinyStan)
launch_shinystan(meta_fit)
load("~/Documents/stateActionExpt/analysis/stan/simple model/modelfits_marginalizeTheta/fitParams_group.RData")
fitParams
launch_shinystan(meta_fit)
quit()
quit()
log(0)
log(1)
log1
log(0.1)
log(4)
log(8)
log(4)
log(-4)
exp(-4)
log(0.1)
log(4)
exp(-1.38)
exp(0.1)
log(0.1)
exp(2)
exp(-2)
exp(3)
exp(-3)
quit()
source('~/Dropbox/Research/Metacognition/BN_model/selfSelf/model development/prePostCov.R')
help(factanal)
help(polycor)
install.packages(polycor)
install.packages(polycov)
install.packages("polycor")
require("polycor")
help(hetcor)
help(data.frame)
help(rand)
help(randn)
help()
replicate(10, rnorm(20))
dat = data.frame(replicate(10, rnorm(20)))
dat
help(factanal)
help(hetcor)
covmat
covmat = hetcor(dat)
covmat
help(factanal)
factanal(dat)
factanal(dat, factors=20, covmat=covmat, rotation="oblimin")
covmat
help(hetcor)
covmat$correlations
help(cov2cor)
factanal(dat, factors=20, covmat=covmat$correlations, rotation="oblimin")
factanal(dat, factors=20, rotation="oblimin")
factanal(dat, factors=20)
dat
factanal(dat, factors=20)
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
install.packages("lme4")
install.packages("car")
install.packages("doB")
install.packages("doBy")
install.packages("optimx")
install.packages("stargazer")
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
bigData$conf
QSR
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
bigData$rawConf < 0.5
bigData$rawConf < 0.5
bigData$conf < 0.5
bigData$conf[bigData$conf < 0.5]
bigData$rawConf[bigData$rawConf < 0.5]
bigData$rawConf[1]
bigData$rawConf[2]
bigData$rawConf[10]
bigData$rawConf[4]
bigData$rawConf[1002]
bigData$rawConf[1003]
plot(bigData$rawConf)
bigData$rawConf_low = rep(0, length(bigData$rawConf))
bigData$rawConf_low[bigData$rawConf < 0.5] = bigData$rawConf[bigData$rawConf < 0.5]
plot(bigData$rawConf_low)
bigData$rawConf_low = rep(0, length(bigData$rawConf))
bigData$rawConf_low[bigData$rawConf <= 0.5] = bigData$rawConf[bigData$rawConf <= 0.5]
bigData$rawConf_high = rep(0, length(bigData$rawConf))
bigData$rawConf_high[bigData$rawConf > 0.5] = bigData$rawConf[bigData$rawConf > 0.5]
plot(bigData$rawConf_high)
bigData$rawConf_low = rep(0, length(bigData$rawConf))
bigData$rawConf_low[bigData$rawConf <= 0.5] = bigData$rawConf[bigData$rawConf <= 0.5]
bigData$rawConf_high = rep(0, length(bigData$rawConf))
bigData$rawConf_high[bigData$rawConf > 0.5] = bigData$rawConf[bigData$rawConf > 0.5]
confModel_split = lmer(BOLD ~ rawConf_low + rawConf_high + (1 + rawConf_low + rawConf_high | subj), data=bigData, control = lmerControl(optimizer = "optimx", calc.derivs = FALSE, optCtrl = list(method = "bobyqa", starttests = FALSE, kkt = FALSE)))
confModel_split
summary(confModel_split)
fix <- fixef(confModel_split)
fix.se <- sqrt(diag(vcov(confModel_split)))
barX <- barplot(fix, beside = TRUE, ylab = "Regression betas", names.arg = names(fix), cex.names = 0.5)
errorBar(barX, fix, fix.se)
betas <- c(fix, fix.se)
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
print(Anova(confModel_split, type=3))
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
source('~/Dropbox/Research/Metacognition/stateActionExpt/mri_analysis/meta_ROI_regression.R')
